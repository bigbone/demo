<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="full-screen" content="true" />
</head>

<body>
    <div>
        <canvas width="414px" height="200px" id="canvas"></canvas>
    </div>
</body>
<script src="imgparse.js" type="text/javascript"></script>

<script>
    var imgsrc = _WB.getImgURL('8a11d2a3ly8fv5phtlrlxj20e80e83yw', 'large');

    var tempcanvas = document.createElement('canvas');
    var ctx = tempcanvas.getContext('2d');
    var canvas = document.getElementById('canvas');


    var img2 = new Image();
    img2.crossOrigin = 'Anonymous';
    img2.onload = function() {
        var img = new Image();
        img.onload = function() {
            var width = img.naturalWidth;
            var height = img.naturalHeight;

            canvas.width = width;
            canvas.height = height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img2, 0, 0, img2.width, img2.height, 430, 70, 300, 300);
            ctx.drawImage(img, 0, 0, width, height, 0, 0, width, height);
            // 文字样式
            ctx.font = '40px STHeiti, SimHei';
            // 文字先描边
            ctx.lineWidth = 3;
            ctx.fillStyle = 'white';
            ctx.strokeStyle = 'red';
            ctx.strokeText('胖民', 540, 520);
            // 再填充
            ctx.fillText('胖民', 540, 520);

        }
        img.crossOrigin = 'Anonymous';
        img.src = "test.png";
    }
    img2.src = imgsrc;
</script>

</html>